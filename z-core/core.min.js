function the_domain(){return window.location.protocol+"//"+window.location.host}function create_notify(e,t){var a='<span>Close <span class="close icon icon-white icon-close"></span></span>';void 0==t&&(t="");var e='<table cellpadding="0" cellspacing="0" border="0"><tr><td><span style="background-image: url(/media/bob.png);"></span></td><td><span>'+e+t+"</span></td></tr></table>";return'<div class="notify">'+a+e+"</div>"}function create_tl(){var e="",t="",a=parseInt($.get_query("nav-cph"));a>0||(a=1),1==a?e='<p class="title-bar">1<sup>st</sup> Chapter - Topics List</p>':2==a?e='<p class="title-bar">2<sup>nd</sup> Chapter - Topics List</p>':3==a?e='<p class="title-bar">3<sup>rd</sup> Chapter - Topics List</p>':a>3&&(e='<p class="title-bar">'+a+"<sup>th</sup> Chapter - Topics List</p>"),e+='<table class="topic-list" cellpadding="0" cellspacing="0" border="0">';var n=walker_top[a-1];for(i=0;i<n.length;i++){var o="'"+the_domain()+"/dmbuddy?page=course&nav-cph="+a+"&nav-top="+(i+1)+"'";t=t+'<tr onclick="location.href='+o+'"><td><span>'+a+"."+(i+1)+"</span></td><td>"+n[i]+"</td></tr>"}return e+t+"</table>"}function create_cl(){var e="";for(i=0;i<walker_chp.length;i++)e=e+'<tr data-link="cph'+(i+1)+'-data" onclick="show_chp(this);"><td><span>CPH '+(i+1)+"</span></td><td>"+walker_chp[i]+'</td><td><span class="icon icon-next icon-gray transitionFast"></span></td></tr><tr id="cph'+(i+1)+'-data" style="height: 0;" class="chapter-data"><td></td></tr>';return'<table class="chapter-list" cellpadding="0" cellspacing="0" border="0">'+e+"</table>"}function hinx(e){var t=$(e).closest(".question-set");t.find(".next-cta").removeClass("disabled")}function render_qz(){var e=$(".qz-ele"),t=e.length,a="<form>",n='<div data-question="0" data-correct="0" data-total="'+t+qz_foot_end,o="";for(i=0;i<t;i++){var r=" ";i+1==t&&(r=" last-question ");var s='<div data-question="'+(i+1)+'" class="question-set'+r+'transition">',c=e.eq(i).find("#qz-q").html();c="<p>"+c+"</p>";var l=e.eq(i).find(".qz-a"),u="";for(j=0;j<l.length;j++){var d="";l.eq(j).hasClass("correct")&&(d=" correct"),u=u+'<p class="option-base"><input onclick="hinx(this);" class="option radio'+d+'" type="radio" id="opt-'+i+"-"+j+'" name="opt-'+i+'"><label for="opt-'+i+"-"+j+'"><span onclick="hinx(this);">'+$(l).eq(j).html()+"</span></label></p>"}o=o+s+c+u+qz_nav_last}$(".quiz").html(a+o+n)}function create_qz(){function e(e){var t="";if(o>50)var t="<p>Nice Score!</p><p>You have scored "+o+'% marks in this topic. You are intelligent my friend. But remember, as Kevin said, "Practice will make you perfect. And when it comes to digital marketing, you need to keep yourself updated."';else if("no-attempts"==e)var t="<p>Hey Buddy!</p><p>You have scored "+o+"% marks in this topic. I know, you can do it better. You should read this topic one more time. As if you do not have any attempts left. Either you can reset this chapter (or) increase your attempt limit (to learn more open help section).";else var t="<p>Hey Buddy!</p><p>You have scored "+o+"% marks in this topic. I know, you can do it better. Before attempting this quiz again.You should read this topic one more time.";$(create_notify(t)).insertAfter(".chatBox")}var t=parseInt($.get_query("nav-cph")),a=parseInt($.get_query("nav-top")),n=progress("get-attempt",t,a);if(n>=2){$(".retake").remove();var o=progress("get-score",t,a);e(o,"no-attempts")}else if(n<2&&n>0){render_qz();var o=progress("get-score",t,a);e(o),$("#result").html("Your Score <span>"+o+"%</span>");var i=$(".question-set").length;i-=1,$(".question-set, .question-submit").css("transform","translateX(-"+100*i+"%)"),$(".retake-cta").removeClass("disabled")}else render_qz();$(".qz-ele").remove()}function progress(e,t,a,n){var o="a"+obj_selected+"-progress";if(Cookies.get(o)){var i=Cookies.getJSON(o),r=0,s=0;if($.each(i,function(e,n){n[0]==t&&n[1]==a&&(r=e,s=e+1)}),"get-score"==e&&0==s)return"no";if("get-score"==e)return i[r][2];if("get-attempt"==e&&0==s)return"no";if("get-attempt"==e)return i[r][3];if("set"!==e)return;if(0==s){var c=[];c[0]=t,c[1]=a,c[2]=n,c[3]=1,i.push(c),Cookies.set(o,i)}else i[r][2]=n,i[r][3]=2,Cookies.set(o,i)}else{if("get-score"==e||"get-progress"==e||"get-attempt"==e)return"no";if("set"!==e)return;var l=[],c=[];c[0]=t,c[1]=a,c[2]=n,c[3]=1,l.push(c),Cookies.set(o,l)}}function show_chp(e){var t="#"+$(e).data("link"),a="#"+$(e).data("link")+" td:first-child";if($(e).hasClass("active"))$(t).animate({height:0},150),$(e).removeClass("active");else{var n=$(a).outerHeight();$(t).animate({height:n},150),$(e).addClass("active")}}function load_ct(e,t){var a,n=0,o=0;n=parseInt(Cookies.get("guide-current-chapter")),o=parseInt(Cookies.get("guide-current-topic")),"guide"==e&&n>0&&o>0&&("next-chapter"==t?(n++,a="guide"):"prev-chapter"==t?(n--,a="guide"):"next-topic"==t?(o++,a="guide"):"prev-topic"==t?(o--,a="guide"):a="guide"),n=0,o=0,n=parseInt(Cookies.get("a"+obj_selected+"-current-chapter")),o=parseInt(Cookies.get("a"+obj_selected+"-course-current-topic")),n>0&&o>0&&("next-chapter"==t?(n++,a="a"+obj_selected):"prev-chapter"==t?(n--,a="a"+obj_selected):"next-topic"==t?(o++,a="a"+obj_selected):"prev-topic"==t?(o--,a="a"+obj_selected):a="a"+obj_selected),$.ajax({url:the_domain()+a+"/content-"+n+"-"+o+".dmb",cache:!1,success:function(e){$("#inner-content").html(e)}})}function load_page(e){var t,a;if("home"==e)t=the_domain()+"/a"+obj_selected+"/home.dmb",a="#inner-content";else if("course"==e){var n=parseInt($.get_query("nav-cph")),o=parseInt($.get_query("nav-top"));n>0||(n=1),o>0||(o=1),t=the_domain()+"/a"+obj_selected+"/data-"+n+"-"+o+".dmb",a="#inner-content"}else t=the_domain()+"/pages/page-content/"+e+".dmb",a="#info-base";$.ajax({url:t,cache:!1,success:function(t){$(a).html(t),render_page(e+"-r1")}})}function toggle_menu(e){1==e&&($("#content, #navigation, #drawer").addClass("menu-open").bind("transitionend webkitTransitionEnd",function(){$("#content").addClass("on-flow")}),document.getElementById("drawer").onclick=function(){toggle_menu(0)}),0==e&&($("#content, #navigation, #drawer").removeClass("menu-open").bind("transitionend webkitTransitionEnd",function(){$("#content").removeClass("on-flow")}),document.getElementById("drawer").onclick=function(){toggle_menu(1)})}function next_question(e){if(!(quiz_attempt>2)){var t=parseInt($.get_query("nav-cph")),a=parseInt($.get_query("nav-top")),n=progress("get-attempt",t,a),o=$(e).closest(".question-set"),r=parseInt(o.data("question"));if(o.hasClass("question-submit"))$("input.option").prop("checked",!1),$(".question-submit").data("correct",0);else{var s=o.find(".option"),c=!0;for(i=0;i<s.length;i++)s.eq(i).prop("checked")&&(c=!1);if(c)return;if(o.find(".correct").prop("checked")){var l=parseInt($(".question-submit").data("correct"))+1;$(".question-submit").data("correct",l)}}if(o.hasClass("last-question")){var u=$(".question-submit").data("correct"),d=$(".question-submit").data("total"),p=Math.floor(u/d*100);$("#result").html("Your Score <span>"+p+"%</span>"),progress("set",t,a,p),n>=1&&(quiz_attempt=n),quiz_attempt+=1,quiz_attempt<2?$(".retake-cta").removeClass("disabled"):quiz_attempt>=2&&$(".retake-cta").addClass("disabled")}$(".question-set, .question-submit").css("transform","translateX(-"+100*r+"%)")}}function create_page(e,t){"action-page"==e?$.ajax({url:the_domain()+"/pages/framework/action-page.dmb",cache:!1,success:function(e){$(e).insertAfter(".loading-screen"),load_page(t)}}):"content-page"==e&&$.ajax({url:the_domain()+"/pages/framework/default.dmb",cache:!1,success:function(e){$(e).insertAfter(".loading-screen"),run_sequence(1)&&("home"==t?load_page("home"):"course"==t&&load_page("course"))}})}function render_page(e){if("course-r1"==e)run_sequence(2);else if("course-r2"==e)run_sequence(3);else if("course-r3"==e){create_qz();var t=0;$(".question-set").each(function(){$(this).outerHeight()>t&&(t=$(this).height())}),$(".question-set").css("height",t);var a=parseInt($.get_query("nav-cph")),n=parseInt($.get_query("nav-top"));a>0||(a=1),n>0||(n=1),redirect_url="dmbuddy?page=course&nav-cph="+a+"&nav-top="+n,Cookies.set("last_page",redirect_url,{expires:365}),end_loading()}else if("home-r1"==e){var o=Cookies.get("last_page");if(""!=o){chp_num=new RegExp("[?&]nav-cph=([^&#]*)").exec(o),n=new RegExp("[?&]nav-top=([^&#]*)").exec(o);var i="<p>Hey buddy!</p><p>Where have you been?</p><p>I was waiting for you. Lets start reading together and continue from where you left off</p>",r='<a class="button primary flat large" href="dmbuddy?page=course&nav-cph='+chp_num[1]+"&nav-top="+n[1]+'">Continue</a>';$(".continue-base").html(create_notify(i,r))}$("#chapter-base").html(create_cl()),end_loading()}else end_loading()}function select_objective(e){1==e?(Cookies.set("user_obj","1",{expires:365}),location.href=the_domain()+"/dmbuddy?page=home"):2==e?Cookies.set("user_obj","2",{expires:365}):3==e&&Cookies.set("user_obj","3",{expires:365})}function set_objective(e){if("newbie"==e)load_page("first-destination");else if("switch"==e){var t="<div><h3>Switch Objective</h3>";t+="<p>You are about to switch your selected objective. Course content will be changed according to the objective you select.</p>",t+='<a id="obj-1" class="button" onClick="select_objective(1)">Promote business</a>',t+='<a id="obj-2" class="button" onClick="select_objective(2)">Making money online</a>',t+='<a id="obj-3" class="button" onClick="select_objective(3)">Become a webmaster</a>',t+="</div>",show_notification(t)}else{var t="<div><h3>Select Objective</h3>";t+="<p>We can't find your data in your device. Its seems your android device has been reset.</p>",t+='<a id="selObj" class="button" onClick="select_objective()">Select</a></div>',show_notification(t)}}function continue_reading(){var e=Cookies.get("current-page");"course-page"==e?load_ct():"guide-page"==e?load_ct("guide"):load_home()}function obj_logo(e){$("#logo").data("background-image",function(){return"media/obj-logo-"+e})}function create_nav(e){$.ajax({url:the_domain()+"/nav/a"+e+".dmb",cache:!1,success:function(e){$("#inner-menu").html(e)}})}function end_loading(){window.addEventListener("load",function(){var e=$(".loading-screen");e.animate({opacity:0},"linear",function(){$(this).css("pointer-events","none")})})}function set_walker(e){void 0!==walker?($.each(walker,function(t,a){t==e&&$.each(a,function(e,t){var a=0;"course"==e&&$.each(t,function(e,t){walker_chp[a]=e,a++;var n=0,o=[];$.each(t,function(e,t){o[n]=t,n++}),walker_top.push(o)})})}),start_script()):$.getJSON("/z-core/config.json").done(function(t){walker=t,set_walker(e)})}function run_sequence(e){if(1==e)return create_nav(obj_selected),obj_logo(obj_selected),!0;if(2==e){$(".kevin").html(function(){return'<img draggable="false" src="../images/kevin.png"/><nm>Kevin</nm><span>'+$(this).html()}),$(".bob").html(function(){return'<img draggable="false" src="../images/bob.png"/><nm>bob</nm><span>'+$(this).html()}),$(".stuart").html(function(){return'<img draggable="false" src="../images/stuart.png"/><nm>stuart</nm><span>'+$(this).html()}),$(".dave").html(function(){return'<img draggable="false" src="../images/dave.png"/><nm>dave</nm><span>'+$(this).html()}),$(".tim").html(function(){return'<img draggable="false" src="../images/tim.png"/><nm>tim</nm><span>'+$(this).html()});var t='<p class="title-bar">Buddies Chat</p>';$(t).insertAfter(".contentBox"),$("#list-base").html(create_tl()),render_page("course-r2")}else 3==e&&$(".topic-list tr").each(function(e){var t=parseInt($.get_query("nav-top"));t>0||(t=1),t--,e==t&&$(this).addClass(function(){return render_page("course-r3"),"active"})})}function start_script(){return obj_selected=parseInt(Cookies.get("user_obj")),0!=$.get_query("page")&&obj_selected>0?void 0==walker?void set_walker("a"+obj_selected):void("home"==$.get_query("page")?create_page("content-page","home"):"course"==$.get_query("page")?create_page("content-page","course"):create_page("guide"==$.get_query("page")?"guide":"error")):obj_selected>0?void create_page("action-page","returning"):(obj_selected=0,void create_page("action-page","first-destination"))}var obj_selected,walker,quiz_attempt=0,walker_chp=[],walker_top=[],cdn_domain="https://cdnjs.cloudflare.com/ajax/libs/",hammer_url=cdn_domain+"hammer.js/2.0.8/hammer.min.js",hammer_loaded=!1;$.load_script=function(e,t){$.ajax({url:e,dataType:"script",success:t,async:!0})},$.get_query=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);try{return t[1]||0}catch(e){return 0}},window.addEventListener("load",start_script());